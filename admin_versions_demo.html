<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Versions du Système - JDR 4 MJ (Démo)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .version-card {
            transition: transform 0.2s;
        }
        .version-card:hover {
            transform: translateY(-2px);
        }
        .version-badge {
            font-size: 0.9em;
        }
        .system-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .migration-success {
            color: #28a745;
        }
        .migration-error {
            color: #dc3545;
        }
        
        /* Styles pour les onglets */
        .nav-tabs .nav-link {
            border: none;
            border-bottom: 3px solid transparent;
            color: #6c757d;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .nav-tabs .nav-link:hover {
            border-color: #dee2e6;
            color: #495057;
        }
        
        .nav-tabs .nav-link.active {
            color: #0d6efd;
            border-bottom-color: #0d6efd;
            background-color: transparent;
        }
        
        .tab-content {
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 0.375rem 0.375rem;
            padding: 1.5rem;
            background-color: #fff;
        }
        
        .tab-pane {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-icon {
            margin-right: 0.5rem;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }
        
        .stats-card .card-body {
            padding: 1.5rem;
        }
        
        .stat-item {
            text-align: center;
            padding: 1rem;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">
                    <i class="fas fa-code-branch"></i> Versions du Système
                    <span class="badge bg-danger">Admin</span>
                </h1>
            </div>
        </div>

        <!-- Onglets de navigation -->
        <div class="row">
            <div class="col-12">
                <ul class="nav nav-tabs" id="versionTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="system-tab" data-bs-toggle="tab" data-bs-target="#system" type="button" role="tab" aria-controls="system" aria-selected="true">
                            <i class="fas fa-server tab-icon"></i>Système
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="application-tab" data-bs-toggle="tab" data-bs-target="#application" type="button" role="tab" aria-controls="application" aria-selected="false">
                            <i class="fas fa-code tab-icon"></i>Application
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="database-tab" data-bs-toggle="tab" data-bs-target="#database" type="button" role="tab" aria-controls="database" aria-selected="false">
                            <i class="fas fa-database tab-icon"></i>Base de Données
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="migrations-tab" data-bs-toggle="tab" data-bs-target="#migrations" type="button" role="tab" aria-controls="migrations" aria-selected="false">
                            <i class="fas fa-history tab-icon"></i>Migrations
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="actions-tab" data-bs-toggle="tab" data-bs-target="#actions" type="button" role="tab" aria-controls="actions" aria-selected="false">
                            <i class="fas fa-tools tab-icon"></i>Actions
                        </button>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Contenu des onglets -->
        <div class="tab-content" id="versionTabsContent">
            <!-- Onglet Système -->
            <div class="tab-pane fade show active" id="system" role="tabpanel" aria-labelledby="system-tab">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card stats-card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-server"></i> Informations Système
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-3 stat-item">
                                        <div class="stat-value">8.3.6</div>
                                        <div class="stat-label">PHP Version</div>
                                    </div>
                                    <div class="col-md-3 stat-item">
                                        <div class="stat-value">10.11.13</div>
                                        <div class="stat-label">MySQL Version</div>
                                    </div>
                                    <div class="col-md-3 stat-item">
                                        <div class="stat-value">2025-10-14 22:15:30</div>
                                        <div class="stat-label">Heure Serveur</div>
                                    </div>
                                    <div class="col-md-3 stat-item">
                                        <div class="stat-value">Europe/Paris</div>
                                        <div class="stat-label">Timezone</div>
                                    </div>
                                </div>
                                <hr style="border-color: rgba(255,255,255,0.3);">
                                <div class="row">
                                    <div class="col-md-6">
                                        <strong>Limite mémoire:</strong> 256M
                                    </div>
                                    <div class="col-md-6">
                                        <strong>Temps d'exécution max:</strong> 30s
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Application -->
            <div class="tab-pane fade" id="application" role="tabpanel" aria-labelledby="application-tab">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card version-card">
                            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">
                                    <i class="fas fa-code"></i> Version de l'Application
                                </h5>
                                <button class="btn btn-light btn-sm" onclick="copyVersionInfo()" title="Copier les informations de version">
                                    <i class="fas fa-copy"></i> Copier
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-2">
                                        <strong>Version:</strong><br>
                                        <span class="badge bg-primary version-badge">2.9.2</span>
                                    </div>
                                    <div class="col-md-2">
                                        <strong>Build ID:</strong><br>
                                        <span class="badge bg-secondary version-badge">20251014-204857</span>
                                    </div>
                                    <div class="col-md-2">
                                        <strong>Environnement:</strong><br>
                                        <span class="badge bg-success version-badge">PRODUCTION</span>
                                    </div>
                                    <div class="col-md-2">
                                        <strong>Date de déploiement:</strong><br>
                                        <small>2025-10-14</small>
                                    </div>
                                    <div class="col-md-2">
                                        <strong>Commit Git:</strong><br>
                                        <small><code>f1923cb6</code></small>
                                    </div>
                                    <div class="col-md-2">
                                        <strong>Statut:</strong><br>
                                        <span class="badge bg-success">Déployé</span>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-12">
                                        <strong>Notes de version:</strong><br>
                                        <em>ajout photo de profil</em>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Base de Données -->
            <div class="tab-pane fade" id="database" role="tabpanel" aria-labelledby="database-tab">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card version-card">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">
                                    <i class="fas fa-database"></i> Versions de la Base de Données
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle"></i>
                                    Aucune version de base de données trouvée. Le système de versioning n'est peut-être pas encore initialisé.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Migrations -->
            <div class="tab-pane fade" id="migrations" role="tabpanel" aria-labelledby="migrations-tab">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card version-card">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0">
                                    <i class="fas fa-history"></i> Historique des Migrations
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle"></i>
                                    Aucune migration trouvée dans l'historique.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Actions -->
            <div class="tab-pane fade" id="actions" role="tabpanel" aria-labelledby="actions-tab">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header bg-warning text-dark">
                                <h5 class="mb-0">
                                    <i class="fas fa-tools"></i> Actions Administrateur
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-3 mb-3">
                                        <a href="index.php" class="btn btn-primary w-100">
                                            <i class="fas fa-home"></i> Retour à l'accueil
                                        </a>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <button class="btn btn-info w-100" onclick="location.reload()">
                                            <i class="fas fa-sync-alt"></i> Actualiser
                                        </button>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <a href="admin_starting_equipment.php" class="btn btn-success w-100">
                                            <i class="fas fa-shopping-bag"></i> Équipements de Départ
                                        </a>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <a href="profile.php" class="btn btn-secondary w-100">
                                            <i class="fas fa-user-cog"></i> Profil Admin
                                        </a>
                                    </div>
                                </div>
                                
                                <hr>
                                
                                <div class="row">
                                    <div class="col-12">
                                        <h6><i class="fas fa-info-circle"></i> Informations sur les onglets</h6>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <ul class="list-unstyled">
                                                    <li><i class="fas fa-server text-primary"></i> <strong>Système:</strong> Informations sur PHP, MySQL, serveur</li>
                                                    <li><i class="fas fa-code text-primary"></i> <strong>Application:</strong> Version actuelle et détails de déploiement</li>
                                                </ul>
                                            </div>
                                            <div class="col-md-6">
                                                <ul class="list-unstyled">
                                                    <li><i class="fas fa-database text-success"></i> <strong>Base de Données:</strong> Historique des versions de la DB</li>
                                                    <li><i class="fas fa-history text-info"></i> <strong>Migrations:</strong> Historique des migrations exécutées</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Amélioration de l'expérience utilisateur avec les onglets
        document.addEventListener('DOMContentLoaded', function() {
            // Sauvegarder l'onglet actif dans le localStorage
            const tabButtons = document.querySelectorAll('#versionTabs button[data-bs-toggle="tab"]');
            
            // Restaurer l'onglet actif depuis le localStorage
            const activeTab = localStorage.getItem('activeVersionTab');
            if (activeTab) {
                const tabToActivate = document.querySelector(`#${activeTab}-tab`);
                if (tabToActivate) {
                    const tab = new bootstrap.Tab(tabToActivate);
                    tab.show();
                }
            }
            
            // Écouter les changements d'onglets
            tabButtons.forEach(button => {
                button.addEventListener('shown.bs.tab', function(event) {
                    const targetId = event.target.getAttribute('data-bs-target').substring(1);
                    localStorage.setItem('activeVersionTab', targetId);
                    
                    // Animation d'entrée pour le contenu
                    const activePane = document.querySelector(`#${targetId}`);
                    if (activePane) {
                        activePane.style.opacity = '0';
                        activePane.style.transform = 'translateY(10px)';
                        
                        setTimeout(() => {
                            activePane.style.transition = 'all 0.3s ease';
                            activePane.style.opacity = '1';
                            activePane.style.transform = 'translateY(0)';
                        }, 50);
                    }
                });
            });
        });
        
        // Fonction pour copier les informations de version
        function copyVersionInfo() {
            const versionInfo = {
                application: '2.9.2',
                build: '20251014-204857',
                environment: 'production',
                deployDate: '2025-10-14',
                gitCommit: 'f1923cb6',
                php: '8.3.6',
                mysql: '10.11.13'
            };
            
            const text = `Version: ${versionInfo.application}\nBuild: ${versionInfo.build}\nEnvironment: ${versionInfo.environment}\nDeploy Date: ${versionInfo.deployDate}\nGit Commit: ${versionInfo.gitCommit}\nPHP: ${versionInfo.php}\nMySQL: ${versionInfo.mysql}`;
            
            navigator.clipboard.writeText(text).then(function() {
                // Afficher une notification de succès
                const toast = document.createElement('div');
                toast.className = 'toast align-items-center text-white bg-success border-0 position-fixed top-0 end-0 m-3';
                toast.style.zIndex = '9999';
                toast.innerHTML = `
                    <div class="d-flex">
                        <div class="toast-body">
                            <i class="fas fa-check-circle me-2"></i>Informations de version copiées !
                        </div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                    </div>
                `;
                document.body.appendChild(toast);
                
                const bsToast = new bootstrap.Toast(toast);
                bsToast.show();
                
                // Supprimer l'élément après 3 secondes
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 3000);
            });
        }
    </script>
</body>
</html>
