Avec Classe et races
Récupération des versioons 2024
https://www.aidedd.org/dnd-builder/index.php
https://www.aidedd.org/regles/classes/clerc/

Pour la production il faut envoyer les fichiers sur ce serveur ftp : 
Serveur : robindesbriques.fr
User : u839591438
Mot de passe : jwkczE.ZiFp5>4T
Répertoire cible : /domains/robindesbriques.fr/public_html/jdrmj

ssh u839591438@robindesbriques.fr
./publish.sh "0.0.50" "Début Races"

Dans view_scene.php,
Dans view_scene_player.php
Dans view_monster_sheet.php

Le MJ dispose d'un bouton "Mondes" dans la navbar.
Ce bouton ouvre une fenêtre de gestion des mondes. 
Dans la fenêtre de gestion des mondes, Le MJ peut voir les mondes existants, créer, modifier et supprimer un monde. 
Un monde possède un nom, une carte, des pays.

Un pays est composé de région.
Une région est composée de lieu.
Le MJ doit pouvoir ajouter crée

Dans view_campaign.php, à coté de la zone "Membres", ajoute une zone Monde où l'on peut déclarer dans quel monde se passe la campagne. 


Dans view_campaign.php, remplace les boutons " Nouveau pays, nouvelle région, nouveau lieu" par un bouton "associer un lieu". 
CE bouton permet de rechercher un lieu dans le monde où se déroule la campagne et de l'ajouter à la liste des lieux de la campagne.

Il faut ajouter une catérorie PNJ. 
Un PNJ est un Personnage crée normalement. Puis le PJ le transforme en PNJ.

Dans view_region.php, il faut afficher la liste des PNJs et la liste des monstres vivant dans ce monde en dessous de la Zone "Lieux de cette région".
La liste est triable et filtrable.
Les critères suivants sont affichés : type (PNJ ou monstre), Nom, Classe, Race, Lieu où il se trouve. 

Dans view_place.php, le MJ peux stocker des objets.
Les objets ont une place (description en mode texte) et une description. 
Un objet peut être, un poison, une fiole, des pièces, une lettre, une pièce d'équipement de personnage. 
L'objet peut être visible des joueurs, dans ce cas il est réprésenté par un pion doré sur la carte, ou invisible. 

Supprime le choix fiole, pour les objets.
Remplace "équipement" par les deux choix "Arme" et "Armure"
Ajoute le choix "Objet magique"
Si l'objet sélectionné est "poison", il faut proposer au MJ la liste des poisons pour qu'il le sélectionne. (déjà en base de donnée)
Si l'objet sélectionné est "Objet magique", il faut proposer au MJ la liste des objets magiques pour qu'il le sélectionne (déjà en base de donnée)
Si l'objet sélectionné est "Arme", il faut proposer au MJ la liste des Armes
Si l'objet sélectionné est "Armure", il faut proposer au MJ la liste des Armure 
Si l'objet sélectionné est "lettre", il faut proposer au MJ d'écrire le contenu de la lettre et de définir si la lettre est cachetée ou pas.

Si l'objet sélectionné est "pièces", il faut demander la quantité de pièces d'or, d'argent et de cuivre au MJ.
Un objet peut être identifié ou pas. 


Si un objet est visible, mais n'est pas identifié alors un pion carré et doré contenant un "?" est disposé sur le plan du lieu.
Si un objet "poison" est visible et identifié alors un pion carré et doré contenant un symbole de fiole est disposé sur le plan du lieu.  
Si un objet "Objet magique" est visible et identifié alors un pion carré et doré contenant un symbole de baguette magique est disposé sur le plan du lieu.  
Si un objet "Arme" est visible et identifié alors un pion carré et doré contenant un symbole d'épée est disposé sur le plan du lieu.  
Si un objet "Armure" est visible et identifié alors un pion carré et doré contenant un symbole d'armure est disposé sur le plan du lieu.  
Si un objet "lettre" est visible et identifié alors un pion carré et doré contenant un symbole de lettre est disposé sur le plan du lieu.  
le MJ peut déplacer le pion.

La position des pions objets n'est pas sauvegarder lorsque l'on recharge la page. 
Les pions objets qui devraient être visible des joueurs, ne le sont pas dans view_scene_player.php
dans view_scene_player.php la position des objets n'est pas mise à jour automatiquement.

Dans view_place.php, le MJ peut attribuer chaque objet à un joueur ou à un PNJ ou à un monstre
Quand un objet est attribué, il est ajouté à l'inventaire du joueur ou du PNJ ou du monstre.
Cet inventaire est celui affiché dans la fiche de personnage ou de monstre. 

Il faut revoir l'enregistrement des objets. 
Un objet peut être identifié ou pas. 
Il peut être visible des joueurs ou pas. 
Il peut être attribué à un lieu, à un monstre, à un personnage joueur ou à un personnage non joueur.
Un objet à un type : (Poison, Arme, Armure, Bourse, Lettre)
un objet à un nom d'affichage et type_precis. 
Le type_precis permet d'identifier le type de poison, d'arme ou d'armure.
Les objets de type arme ou d'armure peuvent être équipé ou déséquipé par les personnages ou monstres.

Dans view_character.php, il faut remplacer les zones "Équipement de Combat" et "Équipement et Trésor" 
Par une zone "Equipement" et une zone "Bourse"
Dans la zone "Bourse" il faut afficher l'argent du Personnage.
Dans la zone "Equipement", il faut afficher un tableau des objets possédés.
Le tableau est triable et filtrable. 
il contient les colonnes "Nom" "type" "type précis".
il est possible d'équiper les objets.


Chaque arme, armure est un objet. 

Quand le personnage d'un joueur est accepté dans une campagne, il doit choisir son équipement de départ.
Il le fait lorsqu'il clique la première fois sur "Rejoindre la partie" 
Un fenêtre s'ouvre et lui demande de choisir l'équipement de départ. 
Une fois choisi il est redirigé vers la page view_scene_player.php


Dans view_campaign.php quand le MJ accepte un personnage joueur, il doit l'affecter à un lieu.



"Equipement de départ".
✅ SUPPRIMÉ: create_character.php - Utilisation uniquement de la création par étapes.
.php

Un lieu peut être associé à plusieurs campagnes.
il faut choisir en une hache à deux mains ou une arme courante (table weapons : type = "Armes courantes à distance" ou "Armes courantes de corps à corps"

L'attribution de l'équipement de départ 
(a) une hache à deux mains ou (b) n'importe quelle arme de guerre de corps à corps
(a) deux hachettes ou (b) n'importe quelle arme courante
un sac d'explorateur et quatre javelines

Quand on supprime une campagne, il ne faut pas supprimer les lieux et personnages associés.


Dans edit_character.php si l'équipement de départ n'est pas choisi, il faut proposer un bouton "Equiper mon personnage"
Ce bouton conduit à la page "select_starting_equipment.php" qui permet de choisir l'équipement.
Une fois l'équipement choisi pour le personnage, la classe, l'historique, la race et les caractéristiques de bases ne peuvent plus être modifiées
Une fois l'équipement choisi pour le personnage, l'équipement du personnage ne peut plus être modifié.
Pour être inscrit à une campagne, il faut que le personnage soit équipé. 
 
dans select_starting_equipment.php, il faut aussi ajouter l'équipement de départ lié à l'historique du personnage


Dans la zone "Choisir l'équipement de départ "
il faut proposer des objets en fonction de la classe de personnage. 
Pour un moine :
il faut choisir en une hache à deux mains ou une arme de guerre de corps à corps (table weapons : type = "Armes de guerre de corps à corps"
puis entre un sac d'exploration souterraine ou un sac d'explorateur

un sac d'exploration souterraine contient les objets : 
un sac à dos, 
un pied de biche, 
un marteau, 
10 pitons, 
10 torches, 
une boite d'allume-feu, 
10 jours de rations 
corde de chanvre (15m)
une gourde d'eau. 

un sac d'explorateur contient les objets : 
un sac à dos, 
un sac de couchage, 
une gamelle, 
une boite d'allume-feu, 
10 torches, 
10 jours de rations 
corde de chanvre (15m)
une gourde d'eau. 

Ajouter des évènements à l'histoire du personnage. 

Pouvoir partager un trésor de PNJ entre les joueurs
Ajouter la notion de malle à trésor. (Masquée avant fouille des joueurs)
Ajouter la notion de passage secret (Masqué avant fouille des joueurs)
Ajouter la notion de piège (Masqué avant fouille des joueurs)

Ajouter le jet d'initiative et jet d'attaque
https://www.aidedd.org/regles/combat/

Ajouter les défauts
Ajouter les échoppes

Les lieux : 
- Salle des gardes
- Dortoirs
- Salle du conseil
- Salle du trone
- Temples
- 

Les tables suivantes, sont utilisées pour la création de personnage à l'étape 5. 
barbarian_paths
bard_colleges
cleric_domains
druid_circles
fighter_archetypes
monk_traditions
paladin_oaths
ranger_archetypes
rogue_archetypes
sorcerer_origins
warlock_pacts
wizard_traditions
Il faudrait fusionner ces tables en utilisant la classe requise pour permettre de les récupérer. 

dans http://localhost/jdrmj/admin_versions.php
onglets actions, il faut ajouter trois boutons
- Save Data : exporte tous les fichiers uploadés et toute la base de données sauf la table des users dans un fichier zip
- Save user : exporte les users dans un fichier zip. 
- Load Data : permet d'importer un fichier générer avec "Save data"
- Load user : permet d'importer un fichier générer avec "Save user"


Dans characters.php, un MJ (ou un admin), il faut ajouter la possibilité de créer un PNJ de façon automatique via un bouton "Creation Automatique" 
Le MJ sélectionne la race, la classe et le niveau du personnage. 
Pour les charactéristiques sont sélectionnées en fonction des recommandations du jeu DnD.
Le reste est sélectionné de façon aléatoire. 

Barbare : FOR 15 DEX 13 CON 14 SAG 12 INT 8 CHA 10
Barde : FOR 8 DEX 14 CON 13 SAG 10 INT 12 CHA 15
Clerc : FOR 13 DEX 12 CON 14 SAG 15 INT 8 CHA 10
Druide : FOR 8 DEX 13 CON 14 SAG 15 INT 12 CHA 10
Guerrier : FOR 15 DEX 13 CON 14 SAG 10 INT 12 CHA 8
Moine : FOR 12 DEX 15 CON 13 SAG 14 INT 10 CHA 8
Paladin : FOR 15 DEX 12 CON 13 SAG 10 INT 8 CHA 14
Magicien : FOR 8 DEX 13 CON 14 SAG 12 INT 15 CHA 10
Ensorceleur : FOR 8 DEX 13 CON 14 SAG 10 INT 12 CHA 15
occultiste : FOR 8 DEX 13 CON 14 SAG 10 INT 12 CHA 15
Roublard : FOR 8 DEX 15 CON 13 SAG 10 INT 14 CHA 12
Rodeur : FOR 8 DEX 15 CON 13 SAG 14 INT 12 CHA 10


Ils faut ajouter un boutons PNJ en entêtes. Entre "Groupes" et "Admin"
Ce bouton permet de lister les PNJ et les MNJ.

Il faut différencier la création de PNJ et de PJ. 
Ajouter la possibilité de créer des monstres et des PNJ depuis la page manage_npcs 
Les PJ doivent être créés en utilisant la création par step à partir de l'écran characters.php
Les PNJ doivent être créés à partir de l'écran manage_npcs.php en utilisant soit la création par step soit la création automatique.
toggleNpcIdentification(32, 'Dara', true)

Il faut revoir le code de view_character.php
Voici les règles à appliquer : 
- le SQL doit être géré dans des méthodes de classes 
- le javascript doit être mis dans le fichier jdrmj.js
- les css dans le fichier style.css
- les appels à des modification en base doivent être codé en ajax et faire un appel à un endpoint en php codé dans un répertoire api. 

Dans la zone "Combat", il faut ajouter les zones "Classe d'armure" et "Attaques" comme dans l'ancienne page.

Revoir la CA avec armure et le dépot de fichier

dans view_place.php zone "PNJ présents" l'image du PNJ n'est pas affichée dans la balise npc-avatar

Ok alors il faut réorganiser les choses comme il suit :
- dnd_monsters est la table décrivant les types de monstres. Elle est utilisée pour récupérer la description des monstres. 
- place_monsters est la table utilisée pour enregistrer les positions des monstres
- place_npc est la table utilisée pour enregistrer les positions des npcs et ne doit pas être utilisées pour les monstres
- il manque la table monsters, qui enregistre les instances de monstres déployées dans le monde

Continuer la validation de création de ¨PNJ

Revoir le stockages des données "monstres"

Dessine moi un gnome ensorceleur de niveau 4 
Dans un univers D&D.
L'image doit être carrée.

############################# Dés ################################
Je voudrais que tu me génères une image contenant un set de dés :
- 4 faces,
- 6 faces, 
- 8 faces, 
- 10 faces, 
- 12 faces, 
- 20 faces,
Chacun dans une case de même dimension. Il y a donc 6 cases.
Les dés sont marbrés gris très clair et bleu sans valeurs marquées dessus
Le fond de l'image est transparent.

- 10 faces dont les faces contiennent les nombres 00, 10, 20, 30, 40, 50, 60, 70, 80, 90) . 
Les chiffres sont écrit en doré.
Ils sont générés dans une grille aux cases de taille identique. 
Chaque ligne correspond à un des dés. 
Dans chaque case de chaque ligne, la valeur de la face la plus visible change. 
Si toutes les valeurs du dé de la ligne sont représentées, alors les cases suivantes restent vides.

Je voudrais que tu me génères une image : 
L'image est découpée en grille aux cases de taille identique.
Dans chaque case est dessinée un dé 8 faces avec une valeur différente. 
Les cases contiendront alors les valeurs de 1 à 8.
Le dés est marbré gris très clair et bleu. Les chiffres sont écrit en doré.

Dans un univers DnD, dessine une image carrée de nain des montagnes clerc de niveau 1 sans texte

On va ajouter la possibiliter d'ajouter des "accès" qui permettent de passer d'un lieu à un autre. 
Ces accès peuvent être : 
- Visible des joueurs ou pas.
- Ouvert ou pas.
- piégé ou pas. 

Un accès s'ajoute depuis la page de création d'un lieu.


Dans un univers médiéval fantastique. Dessine moi le plan d'une entrée dans une foret de cyprès 
En vue de dessus. 
En noir et blanc. Avec un cadrillage. Sans texte.



<svg width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <radialGradient id="flameGradient" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="orange" />
      <stop offset="100%" stop-color="red" />
    </radialGradient>
    <filter id="flameGlow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="2" />
    </filter>
  </defs>

  <!-- Dragon head (simplified silhouette) -->
  <path d="M100,50 C120,40 140,60 130,80 C140,70 150,90 140,100 C150,100 160,120 140,130 C130,140 110,130 100,120 Z"
        fill="gold" stroke="darkred" stroke-width="2"/>

  <!-- Animated flame -->
  <circle id="flame" cx="130" cy="80" r="10" fill="url(#flameGradient)" filter="url(#flameGlow)">
    <animate attributeName="r" values="8;12;8" dur="1s" repeatCount="indefinite" />
    <animate attributeName="opacity" values="1;0.6;1" dur="1s" repeatCount="indefinite" />
  </circle>
</svg>
